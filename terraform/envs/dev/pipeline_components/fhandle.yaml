name: FhandleComponent
description: Install main packages
schemaVersion: 1.0
phases:
  - name: build
    steps:
      - name: InstallPackages
        action: ExecuteBash
        inputs:
          commands:
            - |
              set -e
              apt update
              apt install -y git ssdeep python3 python3-venv python3-pip unzip openjdk-21-jdk wget

              # Run setup as ubuntu user.
              sudo -u ubuntu bash <<'EOF'
              set -e
              wget https://github.com/NationalSecurityAgency/ghidra/releases/download/Ghidra_11.4.2_build/ghidra_11.4.2_PUBLIC_20250826.zip
              sudo unzip ghidra_11.4.2_PUBLIC_20250826.zip -d /opt/
              rm ghidra_11.4.2_PUBLIC_20250826.zip

              git clone https://github.com/Aohk22/fcj-project-1.git ~/app
              cd ~/app
              git switch file-processing-service

              python3 -m venv .venv
              source .venv/bin/activate
              pip install --upgrade pip
              pip install -r requirements.txt
              EOF

